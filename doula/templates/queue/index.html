{% extends 'layouts/base.html' %}
{% import 'queue/queued_item.html' as queued_item_tmpl %}

{% block content %}
<div class="title-bar clearfix">
    <h2>Queue</h2>
</div>

<ul class="sort_by unstyled">
    <li>
        <a class="sort_by" data-val="all" href="/queue?sort_by=all&filter_by=allusers">
            All
        </a>
    </li>
    <li>
        <a class="sort_by" data-val="queued" href="/queue?sort_by=queued&filter_by=allusers">
            Queued
        </a>
    </li>
    <li>
        <a class="sort_by" data-val="complete" href="/queue?sort_by=complete&filter_by=allusers">
            Complete
        </a>
    </li>
    <li>
        <a class="sort_by" data-val="failed" href="/queue?sort_by=failed&filter_by=allusers">
            Failed
        </a>
    </li>
    <li>|</li>
    <li>
        <a class="filter_by" data-val="allusers" href="/queue?filter_by=allusers">
            All Users
        </a>
    </li>
    <li>
        <a class="filter_by" data-val="myjobs" href="/queue?filter_by=myjobs">
            My Jobs
        </a>
    </li>
</ul>

<div class="queued_items" data-last-updated="{{ last_updated }}">
    <div class="latest_notifications alert">
    </div>
    {% set items = [] %}
    {% for queued_item in queued_items %}
    	{% if items.append(1) %}{% endif %}
        {{ queued_item_tmpl.render_queued_item(queued_item) }}
    {% endfor %}
    {% if items|length == 0 %}
    	<div class="alert">
            <p>No queue items</p>
    	</div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
__job_dict = {};
</script>
{{ [
'/js/common/util.js',
'/js/common/queue.js'
]|js_script|safe }}
{% endblock %}